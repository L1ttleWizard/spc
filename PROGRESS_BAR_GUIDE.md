# Руководство по тестированию прогресс-баров

## Что было реализовано

### 1. Новый компонент ProgressBar
- **Визуальное заполнение** - полоска заполняется в зависимости от значения
- **Интерактивность** - можно кликать и перетаскивать
- **Анимации** - плавные переходы при изменении значений
- **Ползунок** - появляется при наведении или перетаскивании

### 2. Два варианта прогресс-бара
- **Track** - для прогресса трека (зеленый цвет)
- **Volume** - для громкости (белый цвет)

### 3. Особенности реализации
- Использует скрытый `input[type="range"]` для взаимодействия
- Визуальное заполнение через CSS с динамической шириной
- Поддержка touch событий для мобильных устройств
- Плавные анимации и hover эффекты

## Как тестировать

### 1. Прогресс трека
1. **Запустите музыку** в Spotify (через официальное приложение)
2. **Проверьте заполнение** - полоска должна заполняться зеленым цветом
3. **Проверьте время** - время должно обновляться каждую секунду
4. **Проверьте seek** - кликните на полоску для перемотки

### 2. Громкость
1. **Проверьте заполнение** - полоска должна показывать текущую громкость
2. **Измените громкость** - перетащите ползунок или кликните на полоску
3. **Проверьте синхронизацию** - громкость должна обновляться в Spotify

### 3. Визуальные эффекты
1. **Hover эффект** - наведите мышь на полоску, должен появиться ползунок
2. **Перетаскивание** - ползунок должен увеличиваться при перетаскивании
3. **Анимации** - изменения должны быть плавными

## Отладочная информация

В консоли браузера вы увидите:
```javascript
Player State: {
  isActive: true,
  isPlaying: true,
  hasTrack: true,
  volume: 0.5,
  position: 30000,
  currentPosition: 30000,
  volumePercent: 50,
  trackProgress: 25,
  hasAccessToken: true
}
```

### Ключевые значения:
- `volumePercent` - процент громкости (0-100)
- `trackProgress` - процент прогресса трека (0-100)
- `currentPosition` - текущая позиция в миллисекундах

## Возможные проблемы

### Проблема: Полоска не заполняется
**Решение:**
- Проверьте, что `currentPosition` и `volume` имеют правильные значения
- Убедитесь, что `currentTrack.duration_ms` не равен 0
- Проверьте консоль на ошибки

### Проблема: Seek не работает
**Решение:**
- Убедитесь, что `isActive` равно `true`
- Проверьте, что есть `accessToken`
- Убедитесь, что `currentTrack` существует

### Проблема: Громкость не изменяется
**Решение:**
- Проверьте, что `isActive` равно `true`
- Убедитесь, что `volume` обновляется в Redux state
- Проверьте, что API запросы проходят успешно

## CSS классы

### Основные классы:
- `.bg-neutral-600` - фон полоски
- `.bg-green-500` - заполнение трека
- `.bg-white` - заполнение громкости и ползунок
- `.transition-all duration-150` - анимации

### Состояния:
- `.opacity-0` - скрытый ползунок
- `.opacity-100` - видимый ползунок
- `.scale-110` - увеличенный ползунок при перетаскивании
- `.group-hover:opacity-100` - ползунок при наведении

## Техническая реализация

### Компонент ProgressBar:
```tsx
<ProgressBar 
  variant="track" // или "volume"
  value={percentage} // от 0 до 100
  onChange={handleChange}
  onMouseUp={handleMouseUp}
  disabled={!isActive}
/>
```

### Вычисление процентов:
- **Трек**: `(currentPosition / duration_ms) * 100`
- **Громкость**: `volume * 100`

### Анимации:
- Плавное изменение ширины заполнения
- Появление/исчезновение ползунка
- Увеличение ползунка при перетаскивании 